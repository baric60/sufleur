"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var rxjs_1 = require("rxjs");
var remote_data_ts_1 = require("@devexperts/remote-data-ts");
var product_left_coproduct_left_utils_1 = require("@devexperts/utils/dist/typeclasses/product-left-coproduct-left/product-left-coproduct-left.utils");
var Applicative_1 = require("fp-ts/lib/Applicative");
var observable_utils_1 = require("./observable.utils");
var pipeable_1 = require("fp-ts/lib/pipeable");
var Apply_1 = require("fp-ts/lib/Apply");
var Array_1 = require("fp-ts/lib/Array");
exports.URI = '@devexperts/dx-utils//LiveData';
var tupleC = function (a) { return function (b) { return [a, b]; }; };
var combineRD = function (fa, fb) {
    return remote_data_ts_1.remoteData.ap(remote_data_ts_1.remoteData.map(fa, tupleC), fb);
};
exports.instanceLiveData = tslib_1.__assign(tslib_1.__assign({ URI: exports.URI }, Applicative_1.getApplicativeComposition(observable_utils_1.instanceObservable, remote_data_ts_1.remoteData)), { chain: function (fa, f) { return observable_utils_1.instanceObservable.chain(fa, function (a) { return (remote_data_ts_1.isSuccess(a) ? f(a.value) : rxjs_1.of(a)); }); }, throwError: function (e) { return rxjs_1.of(remote_data_ts_1.failure(e)); }, coproductLeft: function (fa, fb) {
        return observable_utils_1.instanceObservable.map(rxjs_1.combineLatest(fa, fb), function (_a) {
            var a = _a[0], b = _a[1];
            return combineRD(a, b);
        });
    } });
exports.liveData = tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({}, exports.instanceLiveData), pipeable_1.pipeable(exports.instanceLiveData)), { sequenceT: Apply_1.sequenceT(exports.instanceLiveData), sequenceArray: Array_1.array.sequence(exports.instanceLiveData), combine: product_left_coproduct_left_utils_1.coproductMapLeft(exports.instanceLiveData) });
//# sourceMappingURL=live-data.utils.js.map